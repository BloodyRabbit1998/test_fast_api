services:
  # üîπ –°–µ—Ä–≤–∏—Å –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (FastAPI)
  web:
    build: .  # –°–æ–±–∏—Ä–∞–µ–º –æ–±—Ä–∞–∑ –∏–∑ Dockerfile –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
    container_name: fastapi_app  # –ò–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (—É–¥–æ–±–Ω–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
    ports:
      - "8000:8000"  # –ü—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ—Ä—Ç: –ª–æ–∫–∞–ª—å–Ω—ã–π 8000 ‚Üí –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–π 8000
    volumes:
      - .:/app  # –ú–æ–Ω—Ç–∏—Ä—É–µ–º —Ç–µ–∫—É—â—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤–Ω—É—Ç—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (live-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞)
    env_file:
      - .env  # –ü–æ–¥–∫–ª—é—á–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
    depends_on:
      - db  # –ì–æ–≤–æ—Ä–∏–º: –Ω–µ –∑–∞–ø—É—Å–∫–∞–π web, –ø–æ–∫–∞ –Ω–µ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤ db

  # üîπ –°–µ—Ä–≤–∏—Å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL
  db:
    image: postgres:17  # –û–±—Ä–∞–∑ —Å PostgreSQL –≤–µ—Ä—Å–∏–∏ 17
    container_name: postgres_db
    restart: always  # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å–±–æ–µ –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ Docker
    environment:
      POSTGRES_USER: ${POSTGRES_USER}       # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑ .env
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}  # –ü–∞—Ä–æ–ª—å
      POSTGRES_DB: ${POSTGRES_DB}           # –ù–∞–∑–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    ports:
      - ${HOST_DB_PORT}:5432  # –ü—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ—Ä—Ç PostgreSQL
    volumes:
      - postgres_data:/var/lib/postgresql/data  # –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏

volumes:
  postgres_data:  # –û–ø—Ä–µ–¥–µ–ª—è–µ–º volume –¥–ª—è PostgreSQL –¥–∞–Ω–Ω—ã—Ö  –∑—â—ã–µ–ø–∫—É—ã_–≤—Ñ–µ—Ñ–ñ  ‚Ññ Jghtltkztv –º—â–¥–≥—å—É lkz –ó—â—ã–µ–ø–∫—É–´–ô–î lfyys[
